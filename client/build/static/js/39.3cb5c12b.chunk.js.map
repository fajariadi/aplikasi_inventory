{"version":3,"sources":["views/Logistik/Pemeliharaan/DetailPemeliharaan.js","../node_modules/reactstrap/es/CardHeader.js"],"names":["DetailPemeliharaan","props","state","nama","barang_id","karyawan_id","jumlah","modalIsOpen","pemeliharaan","this","data","className","md","row","htmlFor","type","name","id","value","karyawan","disabled","tanggal","status","inventaris","barang","nama_barang","renderElement","inventaris_id","align","size","color","onClick","onSelesai","bind","onRusak","onDelete","jumlah_rusak","Swal","fire","title","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","getAllInventarisQuery","allInventaris","map","inv","rusak","updateRusakInventaris","variables","jumlah_diperbaiki","refetchQueries","query","updateStatusPemeliharaan","match","params","getPemeliharaansQuery","history","push","updateJumlahDiperbaikiInventaris","hapusPemeliharaan","to","displayDetailPemeliharaan","Component","compose","graphql","getPemeliharaanQuery","options","propTypes","tag","tagPropType","PropTypes","string","cssModule","object","CardHeader","Tag","attributes","_objectWithoutPropertiesLoose","classes","mapToCssModules","classNames","React","createElement","_extends","defaultProps"],"mappings":"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","file":"static/js/39.3cb5c12b.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport {graphql} from 'react-apollo';\r\nimport { Link } from 'react-router-dom';\r\nimport * as compose from 'lodash.flowright';\r\nimport Swal from 'sweetalert2';\r\nimport {getPemeliharaanQuery, getPemeliharaansQuery,updateStatusPemeliharaan,hapusPemeliharaan, updateJumlahDiperbaikiInventaris,updateRusakInventaris, getAllInventarisQuery} from '../queries/queries';\r\nimport { \r\n  Form,\r\n  Card, \r\n  CardBody, \r\n  CardHeader, \r\n  Col,\r\n  Row,  \r\n  Button,\r\n  FormGroup,\r\n  Label,\r\n  Input,\r\n} from 'reactstrap';\r\n\r\nclass DetailPemeliharaan extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      nama:'',\r\n      barang_id:'',\r\n      karyawan_id:'',\r\n      jumlah: 0,\r\n      modalIsOpen: false,  \r\n\r\n    };\r\n  }\r\n\r\n    displayDetailPemeliharaan(){\r\n        const {pemeliharaan} = this.props.data;\r\n        if(pemeliharaan){\r\n        return(\r\n            <CardBody>\r\n            <Form className=\"form-horizontal\">\r\n            <Row> \r\n                <Col md=\"4\">\r\n                <FormGroup row>\r\n                    <Col md=\"6\">\r\n                    <Label htmlFor=\"name\">Nama Teknisi</Label>\r\n                    </Col>\r\n                    <Col md=\"6\">\r\n                    <Input type=\"text\" name=\"kode\" id=\"kode\" value={pemeliharaan.karyawan.nama} disabled></Input> \r\n                    </Col>\r\n                </FormGroup>\r\n                </Col>  \r\n                <Col md=\"4\">\r\n                <FormGroup row>\r\n                <Col md=\"3\">\r\n                    <Label htmlFor=\"name\">Tanggal</Label>\r\n                    </Col>\r\n                    <Col md=\"9\">\r\n                    <Input type=\"text\" name=\"kode\" id=\"kode\" value={pemeliharaan.tanggal} disabled></Input> \r\n                    </Col> \r\n                </FormGroup>\r\n                </Col>  \r\n                <Col md=\"4\">\r\n                <FormGroup row>\r\n                <Col md=\"3\">\r\n                    <Label htmlFor=\"name\">Status</Label>\r\n                    </Col>\r\n                    <Col md=\"9\">\r\n                    <Input type=\"text\" name=\"kode\" id=\"kode\" value={pemeliharaan.status} disabled></Input> \r\n                    </Col> \r\n                </FormGroup>\r\n                </Col>  \r\n            </Row>\r\n            <Row> \r\n                <Col md=\"8\">\r\n                <FormGroup row>\r\n                    <Col md=\"3\">\r\n                    <Label htmlFor=\"name\">Nama Inventaris</Label>\r\n                    </Col>\r\n                    <Col md=\"9\">\r\n                    <Input type=\"text\" name=\"kode\" id=\"kode\" value={pemeliharaan.inventaris.barang.nama_barang} disabled></Input> \r\n                    </Col>\r\n                </FormGroup>\r\n                </Col>    \r\n                <Col md=\"4\">\r\n                <FormGroup row>\r\n                <Col md=\"3\">\r\n                    <Label htmlFor=\"name\">Jumlah</Label>\r\n                    </Col>\r\n                    <Col md=\"9\">\r\n                    <Input type=\"text\" name=\"kode\" id=\"kode\" value={pemeliharaan.jumlah} disabled></Input> \r\n                    </Col> \r\n                </FormGroup>\r\n                </Col>  \r\n            </Row>\r\n            </Form>\r\n            {this.renderElement(pemeliharaan.status, pemeliharaan.inventaris.id, pemeliharaan.inventaris.barang.id, pemeliharaan.jumlah)}\r\n            </CardBody>\r\n        )\r\n        }   \r\n    }\r\n\r\n    renderElement(status, inventaris_id, barang_id, jumlah){\r\n      if(status === 'Diperbaiki'){\r\n        return(\r\n          <div align=\"center\">\r\n            <Button size=\"sm\" color=\"success\" onClick={this.onSelesai.bind(this, inventaris_id)}>\r\n              <i className=\"fa fa-check\"></i> Selesai\r\n            </Button>\r\n            <Button size=\"sm\" color=\"danger\" onClick={this.onRusak.bind(this, inventaris_id,barang_id, jumlah)}>\r\n              <i className=\"fa fa-trash\"></i> Rusak                \r\n            </Button>\r\n          </div>\r\n        )\r\n      } else {\r\n        return(\r\n          <div align=\"center\">\r\n            <Button size=\"sm\" color=\"danger\" onClick={this.onDelete.bind(this)}>\r\n              <i className=\"fa fa-trash\"></i> Hapus\r\n            </Button>\r\n          </div>\r\n        )\r\n      }\r\n      \r\n    }\r\n\r\n    onRusak(inventaris_id, barang_id, jumlah_rusak){\r\n        Swal.fire({\r\n            title: 'Apakah anda Yakin?',\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Ya, Saya Yakin!'\r\n          }).then((result) => {\r\n            if (result.isConfirmed) {\r\n                var data = this.props.getAllInventarisQuery;\r\n                var jumlah = 0; // eslint-disable-next-line\r\n                data.allInventaris.map (inv => {\r\n                    if(inv.barang.id === barang_id){\r\n                      return(\r\n                          jumlah = inv.jumlah\r\n                      )\r\n                    }\r\n                });\r\n                var rusak = jumlah-jumlah_rusak;\r\n                this.props.updateRusakInventaris({\r\n                    variables:{\r\n                        id:inventaris_id,\r\n                        jumlah: rusak,\r\n                        jumlah_diperbaiki: 0,\r\n                    },\r\n                    refetchQueries:[{query:getAllInventarisQuery}]\r\n                });\r\n                this.props.updateStatusPemeliharaan({\r\n                    variables:{\r\n                        id:this.props.match.params.id,\r\n                        status: 'Rusak',\r\n                    },\r\n                    refetchQueries:[{query:getPemeliharaansQuery}]\r\n                });\r\n                this.props.history.push(\"/pemeliharaan/pemeliharaan\");\r\n              Swal.fire(\r\n                'Dihapus!',\r\n                'Inventaris Dihapus',\r\n                'success'\r\n              )\r\n            }\r\n          })\r\n    }\r\n\r\n    onSelesai(inventaris_id){\r\n        Swal.fire({\r\n            title: 'Apakah anda Yakin?',\r\n            icon: 'warning',\r\n            showCancelButton: true,\r\n            confirmButtonColor: '#3085d6',\r\n            cancelButtonColor: '#d33',\r\n            confirmButtonText: 'Ya, Saya Yakin!'\r\n          }).then((result) => {\r\n            if (result.isConfirmed) {\r\n                this.props.updateJumlahDiperbaikiInventaris({\r\n                    variables:{\r\n                        id:inventaris_id,\r\n                        jumlah_diperbaiki: 0,\r\n                    },\r\n                    refetchQueries:[{query:getAllInventarisQuery}]\r\n                });\r\n                this.props.updateStatusPemeliharaan({\r\n                    variables:{\r\n                        id:this.props.match.params.id,\r\n                        status: 'Selesai',\r\n                    },\r\n                    refetchQueries:[{query:getPemeliharaansQuery}]\r\n                });\r\n                this.props.history.push(\"/pemeliharaan/pemeliharaan\");\r\n              Swal.fire(\r\n                'Selesai',\r\n                'Inventaris Selesai Diperbaiki',\r\n                'success'\r\n              )\r\n            }\r\n          })\r\n    }\r\n\r\n\r\n  onDelete(){\r\n    Swal.fire({\r\n      title: 'Apakah anda Yakin?',\r\n      icon: 'warning',\r\n      showCancelButton: true,\r\n      confirmButtonColor: '#3085d6',\r\n      cancelButtonColor: '#d33',\r\n      confirmButtonText: 'Ya, Saya Yakin!'\r\n    }).then((result) => {\r\n      if (result.isConfirmed) {\r\n        this.props.hapusPemeliharaan({\r\n          variables:{\r\n            id: this.props.match.params.id,        \r\n          },\r\n          refetchQueries:[{query:getPemeliharaansQuery}],\r\n        });\r\n        this.props.history.push(\"/pemeliharaan/pemeliharaan\");\r\n        Swal.fire(\r\n          'Dihapus!',\r\n          'Pemeliharaan Telah Dihapus',\r\n          'success'\r\n        )\r\n      }\r\n    })\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"animated fadeIn\">\r\n        <Row>\r\n           <Col>\r\n            <Card>\r\n              <CardHeader>\r\n                <i className=\"fa fa-align-justify\"></i>Detail Pemeliharaan Inventaris\r\n                <Link to=\"/pemeliharaan/pemeliharaan\" className={'float-right mb-0'}>\r\n                    <Button size=\"sm\" color=\"primary\">\r\n                    <i className=\"fa fa-\"></i> Kembali\r\n                    </Button>\r\n                </Link>\r\n              </CardHeader>\r\n              {this.displayDetailPemeliharaan()}\r\n            </Card>\r\n          </Col>     \r\n        </Row>\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default compose(\r\n    graphql(getPemeliharaanQuery, {\r\n        options:(props) => {\r\n          return{\r\n            variables:{\r\n              id: props.match.params.id\r\n            }\r\n          }\r\n        }\r\n      }),\r\n      graphql(getPemeliharaansQuery, {name:\"getPemeliharaansQuery\"}),\r\n      graphql(getAllInventarisQuery, {name:\"getAllInventarisQuery\"}),\r\n      graphql(updateJumlahDiperbaikiInventaris, {name:\"updateJumlahDiperbaikiInventaris\"}),\r\n      graphql(updateRusakInventaris, {name:\"updateRusakInventaris\"}),\r\n      graphql(updateStatusPemeliharaan, {name:\"updateStatusPemeliharaan\"}),\r\n      graphql(hapusPemeliharaan, {name:\"hapusPemeliharaan\"}),\r\n      \r\n)(DetailPemeliharaan);\r\n","import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _objectWithoutPropertiesLoose from \"@babel/runtime/helpers/esm/objectWithoutPropertiesLoose\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { mapToCssModules, tagPropType } from './utils';\nvar propTypes = {\n  tag: tagPropType,\n  className: PropTypes.string,\n  cssModule: PropTypes.object\n};\nvar defaultProps = {\n  tag: 'div'\n};\n\nvar CardHeader = function CardHeader(props) {\n  var className = props.className,\n      cssModule = props.cssModule,\n      Tag = props.tag,\n      attributes = _objectWithoutPropertiesLoose(props, [\"className\", \"cssModule\", \"tag\"]);\n\n  var classes = mapToCssModules(classNames(className, 'card-header'), cssModule);\n  return React.createElement(Tag, _extends({}, attributes, {\n    className: classes\n  }));\n};\n\nCardHeader.propTypes = propTypes;\nCardHeader.defaultProps = defaultProps;\nexport default CardHeader;"],"sourceRoot":""}