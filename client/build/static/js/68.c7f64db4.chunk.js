(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[68],{361:function(e,a,r){"use strict";r.r(a);var t=r(22),n=r(23),s=r(25),l=r(24),i=r(2),c=r.n(i),m=r(375),o=r(26),d=r(70),u=r(77),p=r.n(u),b=r(73),g=r(68),h=r(101),v=r(65),f=r(66),E=r(104),O=r(105),y=r(81),j=r(74),k=r(71),P=r(67),N=r(64),B=function(e){Object(s.a)(r,e);var a=Object(l.a)(r);function r(e){var n;return Object(t.a)(this,r),(n=a.call(this,e)).state={nama:"",purchase_id:"",jumlah:0,modalIsOpen:!1,harga:0,sewa:0},n}return Object(n.a)(r,[{key:"toggleModal",value:function(){this.setState({modalIsOpen:!this.state.modalIsOpen})}},{key:"displayPurchaseOrder",value:function(){var e=this.props.getPurchaseOrdersQuery;return e.loading?c.a.createElement("div",null,"Loading order..."):e.purchaseOrders.map((function(e){return c.a.createElement("option",{key:e.id,value:e.id},e.kode)}))}},{key:"displayNewPenerimaanbarang",value:function(){var e=this.props.getPenerimaanBarangsQuery,a="",r="",t="";return e.penerimaanBarangs.map((function(e){return a=e.tanggal,r=e.kode,t=e.akun.karyawan.nama})),c.a.createElement(g.a,null,c.a.createElement(h.a,{className:"form-horizontal"},c.a.createElement(v.a,null,c.a.createElement(f.a,{md:"4"},c.a.createElement(E.a,{row:!0},c.a.createElement(f.a,{md:"6"},c.a.createElement(O.a,{htmlFor:"name"},"Kode Penerimaan Barang")),c.a.createElement(f.a,{md:"6"},c.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:r,disabled:!0})))),c.a.createElement(f.a,{md:"4"},c.a.createElement(E.a,{row:!0},c.a.createElement(f.a,{md:"3"},c.a.createElement(O.a,{htmlFor:"name"},"Tanggal")),c.a.createElement(f.a,{md:"9"},c.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:a,disabled:!0})))),c.a.createElement(f.a,{md:"4"},c.a.createElement(E.a,{row:!0},c.a.createElement(f.a,{md:"3"},c.a.createElement(O.a,{htmlFor:"name"},"Penerima")),c.a.createElement(f.a,{md:"9"},c.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:t,disabled:!0})))))))}},{key:"displayPurchaseOrderDetail",value:function(){var e=this.props.data.purchaseOrder;if(e)return c.a.createElement(g.a,null,c.a.createElement(h.a,{className:"form-horizontal"},c.a.createElement(v.a,null,c.a.createElement(f.a,{md:"4"},c.a.createElement(E.a,{row:!0},c.a.createElement(f.a,{md:"6"},c.a.createElement(O.a,{htmlFor:"name"},"Kode Purchase Order")),c.a.createElement(f.a,{md:"6"},c.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:e.kode,disabled:!0})))),c.a.createElement(f.a,{md:"4"},c.a.createElement(E.a,{row:!0},c.a.createElement(f.a,{md:"3"},c.a.createElement(O.a,{htmlFor:"name"},"Nama vendor")),c.a.createElement(f.a,{md:"9"},c.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:e.vendor.nama,disabled:!0})))))),c.a.createElement("hr",null),c.a.createElement(j.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},c.a.createElement("thead",{align:"center"},c.a.createElement("tr",null,c.a.createElement("th",null,"Nama Barang"),c.a.createElement("th",null,"Satuan"),c.a.createElement("th",null,"Jumlah"))),c.a.createElement("tbody",{align:"center"},e.listItemPurchaseOrder.map((function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,e.nama_barang),c.a.createElement("td",null,e.satuan),c.a.createElement("td",null,e.jumlah_barang))})))),c.a.createElement("div",{align:"center"},c.a.createElement(o.Link,{to:"/penerimaanBarang/penerimaanBarang"},c.a.createElement(k.a,{onClick:this.Submit.bind(this,e.vendor.jenis_usaha),color:"primary"},"Submit"))))}},{key:"Submit",value:function(e){var a=this;"Perkakas"!==e?this.props.data.purchaseOrder.listItemPurchaseOrder.map((function(e){var r="",t=0;if(a.props.getPersediaanBarangsQuery.persediaanBarangs.map((function(a){e.nama_barang===a.barang.nama_barang&&(r=a.barang.id,t=a.jumlah)})),""!==r)a.props.updateJumlahPersediaanBarang({variables:{barang_id:r,jumlah:parseInt(e.jumlah_barang)+parseInt(t)},refetchQueries:[{query:b.E}]});else{var n="";a.props.getBarangsQuery.barangs.map((function(a){e.nama_barang===a.nama_barang&&(n=a.id)})),a.props.addPersediaanBarang({variables:{barang_id:n,jumlah:parseInt(e.jumlah_barang),status:"Available"},refetchQueries:[{query:b.E}]})}})):this.props.data.purchaseOrder.listItemPurchaseOrder.map((function(e){var r=a.props.getAllInventarisQuery,t="",n=0;if(r.allInventaris.map((function(a){e.nama_barang===a.barang.nama_barang&&(t=a.barang.id,n=a.jumlah)})),""!==t)a.props.updateJumlahInventaris({variables:{barang_id:t,jumlah:parseInt(e.jumlah_barang)+parseInt(n)},refetchQueries:[{query:b.r}]});else{var s="";(r=a.props.getBarangsQuery).barangs.map((function(a){e.nama_barang===a.nama_barang&&(s=a.id)})),a.props.addInventaris({variables:{barang_id:s,jumlah:parseInt(e.jumlah_barang),status:"Available",jumlah_dipakai:0,jumlah_diperbaiki:0},refetchQueries:[{query:b.r}]})}}));this.props.updateStatusDonePurchaseOrder({variables:{id:this.props.match.params.id,status:"Done"},refetchQueries:[{query:b.G}]}),this.props.updateStatusListRequestOnOrder({variables:{order_id:this.props.match.params.id,status:"Ready"},refetchQueries:[{query:b.w}]}),p.a.fire({position:"center",icon:"success",title:"Penerimaan Barang Berhasil Disimpan",showConfirmButton:!0})}},{key:"render",value:function(){return c.a.createElement("div",{className:"animated fadeIn"},c.a.createElement(v.a,null,c.a.createElement(f.a,null,c.a.createElement(P.a,null,c.a.createElement(N.a,null,c.a.createElement("i",{className:"fa fa-align-justify"}),"Form Buat Penerimaan Barang",c.a.createElement(o.Link,{to:"/penerimaanBarang/penerimaanBarang",className:"float-right mb-0"},c.a.createElement(k.a,{color:"danger"},"Batal"))),this.displayNewPenerimaanbarang(),this.displayPurchaseOrderDetail()))))}}]),r}(i.Component);a.default=d(Object(m.a)(b.F,{options:function(e){return{variables:{id:e.match.params.id}}}}),Object(m.a)(b.z,{name:"getPenerimaanBarangsQuery"}),Object(m.a)(b.G,{name:"getPurchaseOrdersQuery"}),Object(m.a)(b.E,{name:"getPersediaanBarangsQuery"}),Object(m.a)(b.w,{name:"getListRequestsQuery"}),Object(m.a)(b.t,{name:"getBarangsQuery"}),Object(m.a)(b.r,{name:"getAllInventarisQuery"}),Object(m.a)(b.k,{name:"addPersediaanBarang"}),Object(m.a)(b.Y,{name:"updateJumlahPersediaanBarang"}),Object(m.a)(b.X,{name:"updateJumlahInventaris"}),Object(m.a)(b.db,{name:"updateStatusListRequestOnOrder"}),Object(m.a)(b.ab,{name:"updateStatusDonePurchaseOrder"}))(B)},64:function(e,a,r){"use strict";var t=r(4),n=r(13),s=r(2),l=r.n(s),i=r(14),c=r.n(i),m=r(59),o=r.n(m),d=r(60),u={tag:d.q,className:c.a.string,cssModule:c.a.object},p=function(e){var a=e.className,r=e.cssModule,s=e.tag,i=Object(n.a)(e,["className","cssModule","tag"]),c=Object(d.m)(o()(a,"card-header"),r);return l.a.createElement(s,Object(t.a)({},i,{className:c}))};p.propTypes=u,p.defaultProps={tag:"div"},a.a=p},67:function(e,a,r){"use strict";var t=r(4),n=r(13),s=r(2),l=r.n(s),i=r(14),c=r.n(i),m=r(59),o=r.n(m),d=r(60),u={tag:d.q,inverse:c.a.bool,color:c.a.string,body:c.a.bool,outline:c.a.bool,className:c.a.string,cssModule:c.a.object,innerRef:c.a.oneOfType([c.a.object,c.a.string,c.a.func])},p=function(e){var a=e.className,r=e.cssModule,s=e.color,i=e.body,c=e.inverse,m=e.outline,u=e.tag,p=e.innerRef,b=Object(n.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),g=Object(d.m)(o()(a,"card",!!c&&"text-white",!!i&&"card-body",!!s&&(m?"border":"bg")+"-"+s),r);return l.a.createElement(u,Object(t.a)({},b,{className:g,ref:p}))};p.propTypes=u,p.defaultProps={tag:"div"},a.a=p},68:function(e,a,r){"use strict";var t=r(4),n=r(13),s=r(2),l=r.n(s),i=r(14),c=r.n(i),m=r(59),o=r.n(m),d=r(60),u={tag:d.q,className:c.a.string,cssModule:c.a.object,innerRef:c.a.oneOfType([c.a.object,c.a.string,c.a.func])},p=function(e){var a=e.className,r=e.cssModule,s=e.innerRef,i=e.tag,c=Object(n.a)(e,["className","cssModule","innerRef","tag"]),m=Object(d.m)(o()(a,"card-body"),r);return l.a.createElement(i,Object(t.a)({},c,{className:m,ref:s}))};p.propTypes=u,p.defaultProps={tag:"div"},a.a=p},74:function(e,a,r){"use strict";var t=r(4),n=r(13),s=r(2),l=r.n(s),i=r(14),c=r.n(i),m=r(59),o=r.n(m),d=r(60),u={className:c.a.string,cssModule:c.a.object,size:c.a.string,bordered:c.a.bool,borderless:c.a.bool,striped:c.a.bool,dark:c.a.bool,hover:c.a.bool,responsive:c.a.oneOfType([c.a.bool,c.a.string]),tag:d.q,responsiveTag:d.q,innerRef:c.a.oneOfType([c.a.func,c.a.string,c.a.object])},p=function(e){var a=e.className,r=e.cssModule,s=e.size,i=e.bordered,c=e.borderless,m=e.striped,u=e.dark,p=e.hover,b=e.responsive,g=e.tag,h=e.responsiveTag,v=e.innerRef,f=Object(n.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),E=Object(d.m)(o()(a,"table",!!s&&"table-"+s,!!i&&"table-bordered",!!c&&"table-borderless",!!m&&"table-striped",!!u&&"table-dark",!!p&&"table-hover"),r),O=l.a.createElement(g,Object(t.a)({},f,{ref:v,className:E}));if(b){var y=Object(d.m)(!0===b?"table-responsive":"table-responsive-"+b,r);return l.a.createElement(h,{className:y},O)}return O};p.propTypes=u,p.defaultProps={tag:"table",responsiveTag:"div"},a.a=p}}]);
//# sourceMappingURL=68.c7f64db4.chunk.js.map