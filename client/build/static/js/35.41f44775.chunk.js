(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[35],{296:function(e,a,t){"use strict";t.r(a);var n=t(22),r=t(23),l=t(25),i=t(24),s=t(2),m=t.n(s),c=t(26),o=t(12),u=t(320),d=t(64),p=t(67),E=t.n(p),h=t(62),g=t(75),b=t(119),f=t(69),v=t(70),k=t(292),y=t(293),B=t(91),j=t(66),D=t(71),P=t(74),O=t(65),S=function(e){Object(l.a)(t,e);var a=Object(i.a)(t);function t(e){var r;Object(n.a)(this,t),r=a.call(this,e);var l=!0;return null==localStorage.getItem("username")&&(l=!1),r.state={loggedIn:l,akun_id:localStorage.getItem("user_id"),divisi:localStorage.getItem("divisi")},r}return Object(r.a)(t,[{key:"onDelete",value:function(e){var a=this,t=this.props.data.permintaanBarang,n=!0;t&&t.listRequest.map((function(e){"Proses"!==e.status&&"Delivery"!==e.status&&"Ready"!==e.status||(n=!1)})),console.log(n),!1===n?E.a.fire({position:"center",icon:"error",title:"Dilarang!!!",text:"Permintaan Barang Sedang diproses",showConfirmButton:!0}):E.a.fire({title:"Apakah anda Yakin?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Saya Yakin!"}).then((function(t){t.isConfirmed&&(a.props.hapusPermintaanBarangMutation({variables:{id:e},refetchQueries:[{query:h.D}]}),a.props.hapusManyListRequestMutation({variables:{id:e},refetchQueries:[{query:h.v}]}),a.props.history.push("/permintaanBarang/permintaanBarang"),E.a.fire("Dihapus!","Permintaan Barang Telah Dihapus","success"))}))}},{key:"displayRequestDetail",value:function(){var e=this.props.data.permintaanBarang;if(e)return m.a.createElement(g.a,null,m.a.createElement(b.a,{className:"form-horizontal"},m.a.createElement(f.a,null,m.a.createElement(v.a,{md:"4"},m.a.createElement(k.a,{row:!0},m.a.createElement(v.a,{md:"6"},m.a.createElement(y.a,{htmlFor:"name"},"Kode Permintaan")),m.a.createElement(v.a,{md:"6"},m.a.createElement(B.a,{type:"text",name:"kode",id:"kode",value:e.kode,disabled:!0})))),m.a.createElement(v.a,{md:"4"},m.a.createElement(k.a,{row:!0},m.a.createElement(v.a,{md:"3"},m.a.createElement(y.a,{htmlFor:"name"},"Status")),m.a.createElement(v.a,{md:"9"},m.a.createElement(B.a,{type:"text",name:"kode",id:"kode",value:e.status,disabled:!0})))),this.renderElement3(e.status,e.tanggal_setuju)),m.a.createElement(f.a,null,m.a.createElement(v.a,{md:"4"},m.a.createElement(k.a,{row:!0},m.a.createElement(v.a,{md:"6"},m.a.createElement(y.a,{htmlFor:"name"},"Dibuat Oleh")),m.a.createElement(v.a,{md:"6"},m.a.createElement(B.a,{type:"text",name:"kode",id:"kode",value:e.akun.karyawan.nama,disabled:!0})))),m.a.createElement(v.a,{md:"4"},m.a.createElement(k.a,{row:!0},m.a.createElement(v.a,{md:"3"},m.a.createElement(y.a,{htmlFor:"name"},"Divisi")),m.a.createElement(v.a,{md:"9"},m.a.createElement(B.a,{type:"text",name:"kode",id:"kode",value:e.akun.karyawan.divisi.nama,disabled:!0})))),m.a.createElement(v.a,{md:"4"},m.a.createElement(k.a,{row:!0},m.a.createElement(v.a,{md:"3"},m.a.createElement(y.a,{htmlFor:"name"},"Tanggal")),m.a.createElement(v.a,{md:"9"},m.a.createElement(B.a,{type:"text",name:"kode",id:"kode",value:e.tanggal,disabled:!0})))))),m.a.createElement("hr",null),m.a.createElement(j.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},m.a.createElement("thead",{align:"center"},m.a.createElement("tr",null,m.a.createElement("th",null,"Nama Barang"),m.a.createElement("th",null,"Jumlah"),m.a.createElement("th",null,"Satuan"),m.a.createElement("th",null,"Jenis"),m.a.createElement("th",null,"Status"))),m.a.createElement("tbody",{align:"center"},e.listRequest.map((function(e){return m.a.createElement("tr",{key:e.id},m.a.createElement("td",null,e.nama_barang),m.a.createElement("td",null,e.jumlah_barang),m.a.createElement("td",null,e.satuan),m.a.createElement("td",null,e.jenis),m.a.createElement("td",null,e.status))})))),m.a.createElement("hr",null),m.a.createElement(f.a,null,m.a.createElement(v.a,null,this.renderElement(e.akun.id,e.status)),m.a.createElement(v.a,null,this.renderElement2(e.status))))}},{key:"renderElement",value:function(e,a){return this.state.akun_id===e&&"Belum Disetujui"===a?m.a.createElement("div",{align:"center"},m.a.createElement(c.Link,{to:"/permintaanBarang/editPermintaanBarang/".concat(this.props.match.params.id)},m.a.createElement(D.a,{color:"warning"},m.a.createElement("i",{className:"fa fa-pencil"},"Edit Permintaan Barang"))),m.a.createElement(D.a,{onClick:this.onDelete.bind(this,this.props.match.params.id),color:"danger"},m.a.createElement("i",{className:"fa fa-trash"},"Hapus Permintaan Barang"))):m.a.createElement("div",{align:"center"},m.a.createElement(D.a,{onClick:this.onDelete.bind(this,this.props.match.params.id),color:"danger"},m.a.createElement("i",{className:"fa fa-trash"},"Hapus Permintaan Barang")))}},{key:"renderElement2",value:function(e){if("Logistic"===this.state.divisi&&"Belum Disetujui"===e)return m.a.createElement("div",{align:"center"},m.a.createElement(D.a,{onClick:this.onSetujuiPermintaan.bind(this,this.props.match.params.id),color:"success"},m.a.createElement("i",{className:"fa fa-check"},"Setujui Permintaan Barang")),m.a.createElement(D.a,{onClick:this.onTolakPermintaan.bind(this,this.props.match.params.id),color:"danger"},m.a.createElement("i",{className:"fa fa-times"},"Tolak Permintaan Barang")))}},{key:"renderElement3",value:function(e,a){if("Disetujui"===e||"Ditolak"===e)return m.a.createElement(v.a,{md:"4"},m.a.createElement(k.a,{row:!0},m.a.createElement(v.a,{md:"3"},m.a.createElement(y.a,{htmlFor:"name"},"Tanggal Diproses")),m.a.createElement(v.a,{md:"9"},m.a.createElement(B.a,{type:"text",name:"kode",id:"kode",value:a,disabled:!0}))))}},{key:"onSetujuiPermintaan",value:function(e){this.props.updateStatusPermintaanBarang({variables:{id:e,status:"Disetujui",tanggal_setuju:(new Date).toLocaleDateString()},refetchQueries:[{query:h.D}]}),this.props.updateStatusListRequest({variables:{id:e,status:"Active"},refetchQueries:[{query:h.D},{query:h.v}]}),this.props.history.push("/permintaanBarang/permintaanBarang"),E.a.fire({position:"center",icon:"success",title:"Permintaan Barang Disetujui",showConfirmButton:!0})}},{key:"onTolakPermintaan",value:function(e){this.props.updateStatusPermintaanBarang({variables:{id:e,status:"Ditolak",tanggal_setuju:(new Date).toLocaleDateString()},refetchQueries:[{query:h.D}]}),this.props.updateStatusListRequest({variables:{id:e,status:"Ditolak"},refetchQueries:[{query:h.v}]}),this.props.history.push("/permintaanBarang/permintaanBarang"),E.a.fire({position:"center",icon:"error",title:"Permintaan Barang Ditolak",showConfirmButton:!0})}},{key:"render",value:function(){return!1===this.state.loggedIn?m.a.createElement(o.c,{to:"/login"}):m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(f.a,null,m.a.createElement(v.a,null,m.a.createElement(P.a,null,m.a.createElement(O.a,null,m.a.createElement(f.a,null,m.a.createElement(v.a,null,"Detail Permintaan Barang"),m.a.createElement(v.a,null,m.a.createElement(c.Link,{to:"/permintaanBarang/permintaanBarang",className:"float-right mb-0"},m.a.createElement(D.a,{color:"primary",size:"sm"},"Kembali"))))),this.displayRequestDetail()))))}}]),t}(s.Component);a.default=d(Object(u.a)(h.C,{options:function(e){return{variables:{id:e.match.params.id}}}}),Object(u.a)(h.cb,{name:"updateStatusListRequest"}),Object(u.a)(h.fb,{name:"updateStatusPermintaanBarang"}),Object(u.a)(h.D,{name:"getPermintaanBarangsQuery"}),Object(u.a)(h.v,{name:"getListRequestsQuery"}),Object(u.a)(h.P,{name:"hapusPermintaanBarangMutation"}),Object(u.a)(h.L,{name:"hapusManyListRequestMutation"}))(S)},65:function(e,a,t){"use strict";var n=t(4),r=t(13),l=t(2),i=t.n(l),s=t(14),m=t.n(s),c=t(59),o=t.n(c),u=t(60),d={tag:u.m,className:m.a.string,cssModule:m.a.object},p=function(e){var a=e.className,t=e.cssModule,l=e.tag,s=Object(r.a)(e,["className","cssModule","tag"]),m=Object(u.i)(o()(a,"card-header"),t);return i.a.createElement(l,Object(n.a)({},s,{className:m}))};p.propTypes=d,p.defaultProps={tag:"div"},a.a=p},66:function(e,a,t){"use strict";var n=t(4),r=t(13),l=t(2),i=t.n(l),s=t(14),m=t.n(s),c=t(59),o=t.n(c),u=t(60),d={className:m.a.string,cssModule:m.a.object,size:m.a.string,bordered:m.a.bool,borderless:m.a.bool,striped:m.a.bool,dark:m.a.bool,hover:m.a.bool,responsive:m.a.oneOfType([m.a.bool,m.a.string]),tag:u.m,responsiveTag:u.m,innerRef:m.a.oneOfType([m.a.func,m.a.string,m.a.object])},p=function(e){var a=e.className,t=e.cssModule,l=e.size,s=e.bordered,m=e.borderless,c=e.striped,d=e.dark,p=e.hover,E=e.responsive,h=e.tag,g=e.responsiveTag,b=e.innerRef,f=Object(r.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),v=Object(u.i)(o()(a,"table",!!l&&"table-"+l,!!s&&"table-bordered",!!m&&"table-borderless",!!c&&"table-striped",!!d&&"table-dark",!!p&&"table-hover"),t),k=i.a.createElement(h,Object(n.a)({},f,{ref:b,className:v}));if(E){var y=Object(u.i)(!0===E?"table-responsive":"table-responsive-"+E,t);return i.a.createElement(g,{className:y},k)}return k};p.propTypes=d,p.defaultProps={tag:"table",responsiveTag:"div"},a.a=p}}]);
//# sourceMappingURL=35.41f44775.chunk.js.map