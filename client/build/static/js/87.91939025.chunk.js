(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[87],{353:function(t,a,n){"use strict";n.r(a);var e=n(22),r=n(23),u=n(25),i=n(24),s=n(2),l=n.n(s),m=n(12),c=n(26),o=n(382),d=n(74),b=n(70),g=n(68),h=n(65),j=n(66),f=n(67),E=n(63),p=n(69),v=n(73),O=n(103),q=n(100),$=n(101),_=n(85),y=n(83),S=n(84),I=n(77),k=function(t){Object(u.a)(n,t);var a=Object(i.a)(n);function n(t){var r;Object(e.a)(this,n),(r=a.call(this,t)).submitRequest=function(t){var a=r.props.getRequestsQuery,n="";a.requests.map((function(t){return n=t.id})),r.state.requestItems.map((function(t){return r.props.addListRequestMutation({variables:{nama_barang:t.nama,jumlah_barang:parseInt(t.jumlah),satuan:t.satuan,jenis:t.jenis,request_id:n},refetchQueries:[{query:b.m}]})}))};var u=!0;return null==localStorage.getItem("username")&&(u=!1),r.state={requestItems:[],nama:"",status:"Active",jumlah:"",satuan:"",jenis:"",redirect:!0,selected:null,loggedIn:u},r}return Object(r.a)(n,[{key:"displayRequestDetail",value:function(){var t=this,a=this.props.data.request;if(a)return l.a.createElement(g.a,null,l.a.createElement(h.a,null,l.a.createElement(j.a,{md:"4"},l.a.createElement("h5",null,"Divisi : ",a.divisi.nama)),l.a.createElement(j.a,{md:"4"},l.a.createElement("h5",null,"Tanggal : ",a.tanggal)),l.a.createElement(j.a,{md:"4"},l.a.createElement("h5",null,"Status : ",a.status))),a.listRequest.map((function(a){if(0===t.state.requestItems.length){var n={nama:a.nama_barang,jumlah:a.jumlah_barang,satuan:a.satuan,jenis:a.jenis,status:t.state.status};t.setState((function(t){t.requestItems.push(n)}))}})))}},{key:"onEdit",value:function(t){var a=this;t.preventDefault(),this.setState({modalEdit:!this.state.modalEdit});var n=this.state.requestItems.findIndex((function(t){return t.nama===a.state.nama}));this.state.requestItems[n].jumlah=this.state.jumlah}},{key:"onDelete",value:function(t){var a=this;t.preventDefault(),this.setState({modalDelete:!this.state.modalDelete});var n=this.state.requestItems.findIndex((function(t){return t.nama===a.state.nama}));this.setState((function(t){t.requestItems.splice(n,1)}))}},{key:"onUpdate",value:function(){var t=this,a=this.props.match.params.id;this.props.hapusManyListRequestMutation({variables:{id:a},refetchQueries:[{query:b.p}]}),this.state.requestItems.map((function(n){return t.props.addListRequestMutation({variables:{nama_barang:n.nama,jumlah_barang:parseInt(n.jumlah),satuan:n.satuan,jenis:n.jenis,request_id:a},refetchQueries:[{query:b.m}]})}))}},{key:"displayBarang",value:function(){var t=this.props.getBarangsQuery;return t.loading?l.a.createElement("div",null,"Loading Barang..."):t.barangs.map((function(t){return l.a.createElement("option",{key:t.id,value:t.nama_barang},t.nama_barang)}))}},{key:"toggleModal",value:function(){this.setState({modalIsOpen:!this.state.modalIsOpen})}},{key:"toggleModalEdit",value:function(t){this.setState({nama:t}),this.setState({modalEdit:!this.state.modalEdit})}},{key:"toggleModalDelete",value:function(t){this.setState({nama:t}),this.setState({modalDelete:!this.state.modalDelete})}},{key:"addItem",value:function(t){t.preventDefault(),this.toggleModal();var a={nama:this.state.nama,jumlah:this.state.jumlah,satuan:this.state.satuan,jenis:this.state.jenis,status:this.state.status};this.setState((function(t){t.requestItems.push(a)}))}},{key:"render",value:function(){var t=this;return!1===this.state.loggedIn?l.a.createElement(m.c,{to:"/login"}):l.a.createElement("div",{className:"animated fadeIn"},l.a.createElement(h.a,null,l.a.createElement(j.a,null,l.a.createElement(f.a,null,l.a.createElement(E.a,null,"Form Edit Permintaan Barang",l.a.createElement(c.Link,{to:"/request/request",className:"float-right mb-0"},l.a.createElement(p.a,{label:!0,color:"danger"},"Batal"))),l.a.createElement(g.a,null,this.displayRequestDetail(),l.a.createElement(p.a,{onClick:this.toggleModal.bind(this),size:"sm",color:"success",className:"float-right mb-0"},l.a.createElement("i",{className:"fa fa-plus-circle"})," Tambah Barang"),l.a.createElement(v.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm",className:"mt-3"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Nama Barang"),l.a.createElement("th",null,"Jumlah"),l.a.createElement("th",null,"Satuan"),l.a.createElement("th",null,"Jenis Barang"),l.a.createElement("th",null,"status"),l.a.createElement("th",null,"Edit"),l.a.createElement("th",null,"Hapus"))),l.a.createElement("tbody",null,this.state.requestItems.map((function(a){return l.a.createElement("tr",null,l.a.createElement("td",null,a.nama),l.a.createElement("td",null,a.jumlah),l.a.createElement("td",null,a.satuan),l.a.createElement("td",null,a.jenis),l.a.createElement("td",null,a.status),l.a.createElement("td",null,l.a.createElement(p.a,{onClick:function(n){t.toggleModalEdit(a.nama)}},"Edit")),l.a.createElement("td",null,l.a.createElement(p.a,{onClick:function(n){t.toggleModalDelete(a.nama)}},"Hapus")))}))))),l.a.createElement(c.Link,{to:"/request/request",className:"text-center mb-3"},l.a.createElement(p.a,{onClick:this.onUpdate.bind(this),color:"primary"},"Simpan"))))),l.a.createElement(O.a,{isOpen:this.state.modalIsOpen},l.a.createElement(q.a,null,"Form Tambah Barang"),l.a.createElement($.a,null,l.a.createElement(_.a,{onSubmit:function(a){t.addItem(a)}},l.a.createElement(y.a,null,l.a.createElement(S.a,{htmlFor:"name"},"Nama Barang"),l.a.createElement(I.a,{type:"select",name:"nama",onChange:function(a){return t.setState({nama:a.target.value})},id:"nama",required:!0},l.a.createElement("option",null,"Nama Barang"),this.displayBarang())),l.a.createElement(y.a,null,l.a.createElement(S.a,{htmlFor:"name"},"Jenis Barang"),l.a.createElement(I.a,{type:"select",id:"jenis",onChange:function(a){return t.setState({jenis:a.target.value})},required:!0},l.a.createElement("option",null,"Jenis"),l.a.createElement("option",{value:"Bahan Alam"},"Bahan Alam"),l.a.createElement("option",{value:"Besi"},"Besi"),l.a.createElement("option",{value:"Cat"},"Cat"),l.a.createElement("option",{value:"Kayu"},"Kayu"),l.a.createElement("option",{value:"Keramik"},"Keramik"),l.a.createElement("option",{value:"Material"},"Material"))),l.a.createElement(y.a,null,l.a.createElement(S.a,{htmlFor:"name"},"Satuan"),l.a.createElement(I.a,{type:"select",name:"satuan",id:"satuan",onChange:function(a){return t.setState({satuan:a.target.value})}},l.a.createElement("option",null,"Satuan"),l.a.createElement("option",{value:"Kg"},"Kg"),l.a.createElement("option",{value:"Buah"},"Buah"),l.a.createElement("option",{value:"Meter"},"Meter"),l.a.createElement("option",{value:"Lembar"},"Lembar"),l.a.createElement("option",{value:"Liter"},"Liter"),l.a.createElement("option",{value:"Sak"},"Sak"),l.a.createElement("option",{value:"m3"},"m3"))),l.a.createElement(y.a,null,l.a.createElement(S.a,{htmlFor:"name"},"Jumlah Barang"),l.a.createElement(I.a,{type:"number",id:"jumlah",onChange:function(a){return t.setState({jumlah:a.target.value})},placeholder:"Jumlah Barang",required:!0})),l.a.createElement(p.a,{type:"submit",color:"primary"},"Tambah"),l.a.createElement(p.a,{color:"danger",onClick:this.toggleModal.bind(this)},"Batal")))),l.a.createElement(O.a,{isOpen:this.state.modalEdit},l.a.createElement(q.a,null,"Edit Jumlah Barang"),l.a.createElement($.a,null,l.a.createElement(_.a,{onSubmit:function(a){t.onEdit(a)}},l.a.createElement(y.a,null,l.a.createElement(S.a,{htmlFor:"name"},"Jumlah Barang"),l.a.createElement(I.a,{type:"number",id:"jumlah",onChange:function(a){return t.setState({jumlah:a.target.value})},placeholder:"Jumlah Barang",required:!0})),l.a.createElement(p.a,{type:"submit",color:"primary"},"Tambah"),l.a.createElement(p.a,{color:"danger",onClick:this.toggleModalEdit.bind(this)},"Batal")))),l.a.createElement(O.a,{isOpen:this.state.modalDelete},l.a.createElement($.a,{className:"text-center"},l.a.createElement(_.a,{onSubmit:function(a){t.onDelete(a)}},l.a.createElement("h5",null," APAKAH ANDA YAKIN MENGHAPUS ITEM INI ? "),l.a.createElement(p.a,{type:"submit",color:"primary",className:"mr-3"},"IYA"),l.a.createElement(p.a,{color:"danger",onClick:this.toggleModalDelete.bind(this)},"TIDAK")))))}}]),n}(s.Component);a.default=d(Object(o.a)(b.o,{options:function(t){return{variables:{id:t.match.params.id}}}}),Object(o.a)(b.j,{name:"getBarangsQuery"}),Object(o.a)(b.p,{name:"getRequestsQuery"}),Object(o.a)(b.m,{name:"getListRequestsQuery"}),Object(o.a)(b.e,{name:"addListRequestMutation"}),Object(o.a)(b.s,{name:"hapusManyListRequestMutation"}))(k)},70:function(t,a,n){"use strict";n.d(a,"q",(function(){return I})),n.d(a,"i",(function(){return k})),n.d(a,"k",(function(){return D})),n.d(a,"p",(function(){return B})),n.d(a,"o",(function(){return U})),n.d(a,"m",(function(){return M})),n.d(a,"n",(function(){return R})),n.d(a,"j",(function(){return L})),n.d(a,"d",(function(){return A})),n.d(a,"b",(function(){return C})),n.d(a,"g",(function(){return N})),n.d(a,"f",(function(){return K})),n.d(a,"e",(function(){return F})),n.d(a,"c",(function(){return H})),n.d(a,"r",(function(){return J})),n.d(a,"t",(function(){return Q})),n.d(a,"l",(function(){return w})),n.d(a,"a",(function(){return x})),n.d(a,"h",(function(){return P})),n.d(a,"s",(function(){return T}));var e=n(78),r=n(30);function u(){var t=Object(e.a)(["\n\tquery($id:ID){\n\t\trequest(id: $id) {\n\t\t\ttanggal\n\t\t\tstatus\n\t\t\tid\n\t\t\tdivisi{\n\t\t\t\tnama\n\t\t\t}\n\t\t\tlistRequest{\n\t\t\t\tnama_barang\n\t\t\t\tjumlah_barang\n\t\t\t\tjenis\n\t\t\t\tsatuan\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t}\n"]);return u=function(){return t},t}function i(){var t=Object(e.a)(["\n\tquery($id: ID){\n\t\tbarang(id: $id) {\n\t\t\tnama_barang\n\t\t\tjenis_barang\n\t\t\tsatuan\n\t\t\tid\n\t\t}\n\t}\n"]);return i=function(){return t},t}function s(){var t=Object(e.a)(["\n\tquery($username: String!, $password: String!){\n\t\takun(username: $username, password: $password) {\n\t\t\tusername\n\t\t\tpassword\n\t\t\tkaryawan{\n\t\t\t\tnama\n\t\t\t\tjabatan\n\t\t\t\talamat\n\t\t\t\tnoHp\n\t\t\t\tavatar\n\t\t\t\tid\n\t\t\t\tdivisi{\n\t\t\t\t\tnama\n\t\t\t\t\tid\n\t\t\t\t}\n\t\t\t}\n\t\t\tid\n\t\t}\n\t}\n"]);return s=function(){return t},t}function l(){var t=Object(e.a)(["\n\tmutation($username:String!, $password:String!, $karyawan_id:ID!){\n\t\taddAkun(username: $username, password: $password, karyawan_id:$karyawan_id){\n\t\t\tusername\n\t\t\tpassword\n\t\t\tid\n\t\t}\n\t}\n"]);return l=function(){return t},t}function m(){var t=Object(e.a)(["\n\tmutation($nama_barang:String!, $jenis_barang:String!, $satuan:String!){\n\t\taddBarang(nama_barang: $nama_barang, jenis_barang: $jenis_barang, satuan:$satuan){\n\t\t\tnama_barang\n\t\t\tjenis_barang\n\t\t\tsatuan\n\t\t\tid\n\t\t}\n\t}\n"]);return m=function(){return t},t}function c(){var t=Object(e.a)(["\n\tmutation($id:ID!){\n\t\thapusListRequest(id: $id){\n\t\t\tnama_barang\n\t\t\tjumlah_barang\n\t\t\tsatuan\n\t\t\tjenis\n\t\t\tid\n\t\t}\n\t}\n"]);return c=function(){return t},t}function o(){var t=Object(e.a)(["\n\tmutation($id:ID!){\n\t\thapusManyListRequest(id: $id){\n\t\t\tnama_barang\n\t\t\tjumlah_barang\n\t\t\tsatuan\n\t\t\tjenis\n\t\t\tid\n\t\t}\n\t}\n"]);return o=function(){return t},t}function d(){var t=Object(e.a)(["\n\tmutation($nama_barang:String!, $jumlah_barang:Int!, $satuan:String!, $jenis:String!, $request_id: ID!){\n\t\taddListRequest(nama_barang: $nama_barang, jumlah_barang: $jumlah_barang, satuan:$satuan, jenis:$jenis, request_id: $request_id){\n\t\t\tnama_barang\n\t\t\tjumlah_barang\n\t\t\tsatuan\n\t\t\tjenis\n\t\t\tid\n\t\t}\n\t}\n"]);return d=function(){return t},t}function b(){var t=Object(e.a)(["\n\tmutation($id:ID!){\n\t\thapusRequest(id: $id){\n\t\t\tstatus\n\t\t\tid\n\t\t}\n\t}\n"]);return b=function(){return t},t}function g(){var t=Object(e.a)(["\n\tmutation($tanggal:String!, $status:String!, $divisi_id: ID!){\n\t\taddRequest(tanggal: $tanggal, status: $status, divisi_id: $divisi_id){\n\t\t\ttanggal\n\t\t\tstatus\n\t\t\tid\n\t\t}\n\t}\n"]);return g=function(){return t},t}function h(){var t=Object(e.a)(["\n\tmutation($id:ID!){\n\t\thapusDivisi(id: $id){\n\t\t\tnama\n\t\t\tid\n\t\t}\n\t}\n"]);return h=function(){return t},t}function j(){var t=Object(e.a)(["\n\tmutation($nama:String!){\n\t\taddDivisi(nama: $nama){\n\t\t\tnama\n\t\t\tid\n\t\t}\n\t}\n"]);return j=function(){return t},t}function f(){var t=Object(e.a)(["\n\tmutation($nama:String!, $jenis_usaha:String!){\n\t\taddVendor(nama: $nama, jenis_usaha: $jenis_usaha){\n\t\t\tnama\n\t\t\tjenis_usaha\n\t\t\tid\n\t\t}\n\t}\n"]);return f=function(){return t},t}function E(){var t=Object(e.a)(["\n\tmutation($nama:String!, $jumlah:Int!){\n\t\taddAlat(nama: $nama, jumlah: $jumlah){\n\t\t\tnama\n\t\t\tjumlah\n\t\t\tid\n\t\t}\n\t}\n"]);return E=function(){return t},t}function p(){var t=Object(e.a)(["\n{\n\tkaryawans {\n\t\tnama\n\t\tjabatan\n\t\talamat\n\t\tnoHp\n\t\tavatar\n\t\tdivisi{\n\t\t\tnama\n\t\t}\n\t\tid\n\t}\n}\n"]);return p=function(){return t},t}function v(){var t=Object(e.a)(["\n{\n\tbarangs {\n\t\tnama_barang\n\t\tjenis_barang\n\t\tsatuan\n\t\tid\n\t}\n}\n"]);return v=function(){return t},t}function O(){var t=Object(e.a)(["\n{\n\torders {\n\t\tkode\n\t\ttanggal\n\t\tjenis\n\t\tstatus\n\t\tid\n\t\tvendor{\n\t\t\tnama\n\t\t\tjenis_usaha\n\t\t}\n\t}\n}\n"]);return O=function(){return t},t}function q(){var t=Object(e.a)(["\n{\n\tlistrequests {\n\t\tnama_barang\n\t\tjumlah_barang\n\t\tjenis\n\t\tsatuan\n\t\tid\n\t\trequest{\n\t\t\tstatus\n\t\t\ttanggal\n\t\t\tdivisi{\n\t\t\t\tnama\n\t\t\t}\n\t\t}\n\t}\n}\n"]);return q=function(){return t},t}function $(){var t=Object(e.a)(["\n{\n\trequests {\n\t\ttanggal\n\t\tstatus\n\t\tid\n\t\tdivisi{\n\t\t\tnama\n\t\t}\n\t}\n}\n"]);return $=function(){return t},t}function _(){var t=Object(e.a)(["\n{\n\tdivisis {\n\t\tnama\n\t\tid\n\t}\n}\n"]);return _=function(){return t},t}function y(){var t=Object(e.a)(["\n{\n\talats {\n\t\tnama\n\t\tjumlah\n\t\tid\n\t}\n}\n"]);return y=function(){return t},t}function S(){var t=Object(e.a)(["\n{\n\tvendors {\n\t\tnama\n\t\tjenis_usaha\n\t\tid\n\t}\n}\n"]);return S=function(){return t},t}var I=Object(r.b)(S()),k=Object(r.b)(y()),D=Object(r.b)(_()),B=Object(r.b)($()),M=Object(r.b)(q()),R=Object(r.b)(O()),L=Object(r.b)(v()),w=Object(r.b)(p()),C=Object(r.b)(E()),N=Object(r.b)(f()),A=Object(r.b)(j()),J=Object(r.b)(h()),K=Object(r.b)(g()),Q=Object(r.b)(b()),F=Object(r.b)(d()),T=Object(r.b)(o()),H=(Object(r.b)(c()),Object(r.b)(m())),x=Object(r.b)(l()),P=Object(r.b)(s()),U=(Object(r.b)(i()),Object(r.b)(u()))}}]);
//# sourceMappingURL=87.91939025.chunk.js.map