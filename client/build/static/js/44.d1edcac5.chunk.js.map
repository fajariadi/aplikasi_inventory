{"version":3,"sources":["views/Logistik/PermintaanBarang/PermintaanBarang.js"],"names":["PermintaanBarang","props","loggedIn","localStorage","getItem","state","akun_id","kode","nama","jumlah","satuan","div_id","request_id","addRequest","this","hapusPermintaanBarangMutation","variables","id","refetchQueries","query","getPermintaanBarangsQuery","hapusManyListRequestMutation","data1","no","loading","permintaanBarangs","map","request","key","akun","karyawan","divisi","tanggal","status","to","color","size","className","nomor","parseInt","substring","newKode","addPermintaanBarangMutation","Date","toLocaleDateString","getKodeBaru","tanggal_setuju","disetujui_id","history","push","onClick","addRequestHandler","bind","hover","bordered","striped","responsive","align","displayRequest","previous","tag","active","next","Component","compose","graphql","name","getListRequestsQuery"],"mappings":"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","file":"static/js/44.d1edcac5.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport {graphql} from 'react-apollo';\r\nimport * as compose from 'lodash.flowright';\r\nimport { getPermintaanBarangsQuery, addPermintaanBarangMutation, hapusPermintaanBarangMutation, getListRequestsQuery, hapusManyListRequestMutation} from '../queries/queries';\r\nimport { Button, Card, CardBody, CardHeader, Col, Pagination, PaginationItem, PaginationLink, Row, Table } from 'reactstrap';\r\n\r\nclass PermintaanBarang extends Component {\r\n\r\n   constructor(props){\r\n    super(props);\r\n    const username= localStorage.getItem(\"username\")\r\n\r\n    let loggedIn = true \r\n      if(username == null){\r\n        loggedIn = false\r\n      }\r\n    this.state = {\r\n      akun_id: localStorage.getItem(\"user_id\"),\r\n      kode:'',\r\n      nama:'',\r\n      jumlah:'',\r\n      satuan:'',\r\n      div_id:'',\r\n      request_id:'',\r\n      addRequest:false,\r\n      loggedIn\r\n      }\r\n  }\r\n\r\n  onDelete(request_id){\r\n   this.props.hapusPermintaanBarangMutation({\r\n      variables:{\r\n        id: request_id,        \r\n      },\r\n      refetchQueries:[{query:getPermintaanBarangsQuery}],\r\n    });\r\n   this.props.hapusManyListRequestMutation({\r\n      variables:{\r\n        id: request_id,        \r\n      },\r\n      refetchQueries:[{query:getPermintaanBarangsQuery}],\r\n    });\r\n  }\r\n\r\n  displayRequest(){\r\n    var data1 = this.props.getPermintaanBarangsQuery;\r\n    var no = 0;\r\n    if(data1.loading){\r\n      return (<div>Loading Permintaan Barang...</div>);\r\n    } else {\r\n      return data1.permintaanBarangs.map(request => {\r\n        no++;\r\n        return(\r\n          <tr key={request.id}>\r\n            <td>{no}</td>\r\n            <td>{request.kode}</td>\r\n            <td>{request.akun.karyawan.divisi.nama}</td>\r\n            <td>{request.tanggal}</td>\r\n            <td>{request.status}</td>\r\n            <td>\r\n              <Link to={`/permintaanBarang/detailPermintaanBarang/${request.id}`}>\r\n              <Button color=\"primary\" size=\"sm\">\r\n                <i className=\"fa fa-file\"></i>\r\n                </Button>\r\n              </Link>\r\n            </td>\r\n          </tr>\r\n        );\r\n      });\r\n    }\r\n  }\r\n  getKodeBaru(){\r\n    var newKode = 'R';\r\n    var kode = '';\r\n    var nomor = 1;\r\n    var data = this.props.getPermintaanBarangsQuery; // eslint-disable-next-line\r\n    data.permintaanBarangs.map(request => {\r\n      if(request.kode !== ''){\r\n        kode = request.kode\r\n      } \r\n    })\r\n    if(kode !== ''){\r\n      nomor = parseInt(kode.substring(1,4))+1\r\n    }\r\n    if(nomor < 10){\r\n      kode = newKode+\"00\"+nomor;\r\n    }else if (nomor >= 10 && nomor < 100){\r\n      kode = newKode+\"0\"+nomor;\r\n    }else {\r\n      kode = newKode+\"\"+nomor;\r\n    }\r\n    return kode;\r\n  }\r\n\r\n  addRequestHandler(){\r\n    this.props.addPermintaanBarangMutation({\r\n      variables:{\r\n        tanggal: new Date().toLocaleDateString(),\r\n        status: 'Belum Disetujui',\r\n        akun_id: this.state.akun_id,\r\n        kode: this.getKodeBaru(),\r\n        tanggal_setuju: '',\r\n        disetujui_id: '5f7d7b275e9e27240c35abcf',\r\n      },\r\n      refetchQueries:[{query:getPermintaanBarangsQuery}],\r\n    });\r\n    this.props.history.push(\"/permintaanBarang/buatPermintaanBarang\");\r\n  }\r\n\r\n  render() {\r\n    if(this.state.loggedIn === false){\r\n      return <Redirect to=\"/login\" />\r\n    }\r\n    return (\r\n      <div className=\"animated fadeIn\">\r\n        <Row>\r\n          <Col>\r\n            <Card>\r\n              <CardHeader>\r\n                <Row>\r\n                <Col>\r\n                  <h5>Daftar Permintaan Barang</h5>\r\n                </Col>\r\n                <Col>\r\n                    <Button color=\"primary\" onClick={this.addRequestHandler.bind(this)} className={'float-right mb-0'}>\r\n                    <i className=\"fa fa-plus mr-2\"></i>Buat Permintaan Barang\r\n                    </Button>\r\n                  \r\n                </Col>\r\n                </Row>\r\n              </CardHeader>\r\n              <CardBody>\r\n                <Table hover bordered striped responsive size=\"sm\">\r\n                  <thead align=\"center\">\r\n                  <tr>\r\n                    <th>No</th>\r\n                    <th>Kode</th>\r\n                    <th>Divisi</th>\r\n                    <th>Tanggal</th>\r\n                    <th>Status</th>\r\n                    <th>Aksi</th>\r\n                    \r\n                  </tr>\r\n                  </thead>\r\n                  <tbody align=\"center\">\r\n                  {this.displayRequest()}\r\n                  </tbody>\r\n                </Table>\r\n                \r\n                  <nav>\r\n                    <Pagination>\r\n                      <PaginationItem><PaginationLink previous tag=\"button\">Prev</PaginationLink></PaginationItem>\r\n                      <PaginationItem active>\r\n                        <PaginationLink tag=\"button\">1</PaginationLink>\r\n                      </PaginationItem>\r\n                      <PaginationItem><PaginationLink tag=\"button\">2</PaginationLink></PaginationItem>\r\n                      <PaginationItem><PaginationLink tag=\"button\">3</PaginationLink></PaginationItem>\r\n                      <PaginationItem><PaginationLink tag=\"button\">4</PaginationLink></PaginationItem>\r\n                      <PaginationItem><PaginationLink next tag=\"button\">Next</PaginationLink></PaginationItem>\r\n                    </Pagination>\r\n                  </nav>\r\n                \r\n              </CardBody>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  graphql(getPermintaanBarangsQuery, {name:\"getPermintaanBarangsQuery\"}),\r\n  graphql(getListRequestsQuery, {name:\"getListRequestsQuery\"}),\r\n  graphql(addPermintaanBarangMutation, {name:\"addPermintaanBarangMutation\"}),\r\n  graphql(hapusPermintaanBarangMutation, {name:\"hapusPermintaanBarangMutation\"}),\r\n  graphql(hapusManyListRequestMutation, {name:\"hapusManyListRequestMutation\"}),\r\n)(PermintaanBarang);\r\n"],"sourceRoot":""}