(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[71],{352:function(e,a,t){"use strict";t.r(a);var r=t(22),n=t(23),s=t(25),l=t(24),c=t(2),i=t.n(c),o=t(26),u=t(375),d=t(70),m=t(77),p=t.n(m),h=t(73),b=t(68),f=t(101),g=t(65),E=t(66),v=t(104),O=t(105),y=t(81),j=t(74),k=t(71),P=t(67),N=t(64),D=function(e){Object(s.a)(t,e);var a=Object(l.a)(t);function t(e){var n;Object(r.a)(this,t),n=a.call(this,e);var s=!0;return null==localStorage.getItem("username")&&(s=!1),n.state={loggedIn:s,akun_id:localStorage.getItem("user_id"),divisi:localStorage.getItem("divisi")},n}return Object(n.a)(t,[{key:"displayPurchaseOrderDetail",value:function(){var e=this.props.data.purchaseOrder;if(e)return i.a.createElement(b.a,null,i.a.createElement(f.a,{className:"form-horizontal"},i.a.createElement(g.a,null,i.a.createElement(E.a,{md:"4"},i.a.createElement(v.a,{row:!0},i.a.createElement(E.a,{md:"6"},i.a.createElement(O.a,{htmlFor:"name"},"Kode Purchase Order")),i.a.createElement(E.a,{md:"6"},i.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:e.kode,disabled:!0})))),i.a.createElement(E.a,{md:"4"},i.a.createElement(v.a,{row:!0},i.a.createElement(E.a,{md:"3"},i.a.createElement(O.a,{htmlFor:"name"},"Status")),i.a.createElement(E.a,{md:"9"},i.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:e.status,disabled:!0})))),this.renderElement3(e.status,e.tanggal_setuju)),i.a.createElement(g.a,null,i.a.createElement(E.a,{md:"4"},i.a.createElement(v.a,{row:!0},i.a.createElement(E.a,{md:"6"},i.a.createElement(O.a,{htmlFor:"name"},"Nama Vendor")),i.a.createElement(E.a,{md:"6"},i.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:e.vendor.nama,disabled:!0})))))),i.a.createElement("hr",null),i.a.createElement(j.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},i.a.createElement("thead",{align:"center"},i.a.createElement("tr",null,i.a.createElement("th",null,"Nama Barang"),i.a.createElement("th",null,"Satuan"),i.a.createElement("th",null,"Jumlah"),i.a.createElement("th",null,"Harga"))),i.a.createElement("tbody",{align:"center"},e.listItemPurchaseOrder.map((function(e){return i.a.createElement("tr",{key:e.id},i.a.createElement("td",null,e.nama_barang),i.a.createElement("td",null,e.satuan),i.a.createElement("td",null,e.jumlah_barang),i.a.createElement("td",null,e.harga))})))),i.a.createElement("hr",null),i.a.createElement(g.a,null,i.a.createElement(E.a,null,this.renderElement(e.akun.id,e.status)),i.a.createElement(E.a,null,this.renderElement2(e.tanggal_setuju))))}},{key:"renderElement",value:function(e,a){if(this.state.akun_id===e&&"Disetujui"!==a)return i.a.createElement("div",{align:"center"},i.a.createElement(k.a,{onClick:this.onDelete.bind(this,this.props.match.params.id),color:"danger"},i.a.createElement("i",{className:"fa fa-trash"},"Hapus Permintaan Barang")))}},{key:"renderElement2",value:function(e){if("Logistic"===this.state.divisi&&""===e)return i.a.createElement("div",{align:"center"},i.a.createElement(k.a,{onClick:this.onSetujuiPurchaseOrder.bind(this,this.props.match.params.id),color:"success"},i.a.createElement("i",{className:"fa fa-check"},"Setujui Permintaan Barang")),i.a.createElement(k.a,{onClick:this.onTolakPurchaseOrder.bind(this,this.props.match.params.id),color:"danger"},i.a.createElement("i",{className:"fa fa-times"},"Tolak Permintaan Barang")))}},{key:"renderElement3",value:function(e,a){if("Disetujui"===e||"Ditolak"===e)return i.a.createElement(E.a,{md:"4"},i.a.createElement(v.a,{row:!0},i.a.createElement(E.a,{md:"3"},i.a.createElement(O.a,{htmlFor:"name"},"Tanggal Diproses")),i.a.createElement(E.a,{md:"9"},i.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:a,disabled:!0}))))}},{key:"onSetujuiPurchaseOrder",value:function(e){this.props.updateStatusPurchaseOrder({variables:{id:e,status:"Disetujui",tanggal_setuju:(new Date).toLocaleDateString()},refetchQueries:[{query:h.G}]}),this.props.updateStatusListRequestOnOrder({variables:{order_id:e,status:"Delivery"},refetchQueries:[{query:h.G}]}),this.props.updateStatusListItemPurchaseOrder({variables:{purchaseOrder_id:e,status:"Delivery"},refetchQueries:[{query:h.G}]}),p.a.fire({position:"center",icon:"success",title:"Pembelian Barang Disetujui",showConfirmButton:!0})}},{key:"onTolakPurchaseOrder",value:function(e){this.props.updateStatusPurchaseOrder({variables:{id:e,status:"Ditolak",tanggal_setuju:(new Date).toLocaleDateString()},refetchQueries:[{query:h.G}]}),this.props.updateStatusListRequestOnOrder({variables:{order_id:e,status:"Active"},refetchQueries:[{query:h.G}]}),p.a.fire({position:"center",icon:"success",title:"Pembelian Barang Ditolak",showConfirmButton:!0})}},{key:"onDelete",value:function(e){var a=this;p.a.fire({title:"Apakah anda Yakin?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Saya Yakin!"}).then((function(t){t.isConfirmed&&(a.props.hapusPurchaseOrderMutation({variables:{id:e},refetchQueries:[{query:h.G}]}),a.props.hapusManyListItemPurchaseOrder({variables:{id:e},refetchQueries:[{query:h.G}]}),a.props.history.push("/purchaseOrder/purchaseOrder"),p.a.fire("Dihapus!","Pembelian Barang Telah Dihapus","success"))}))}},{key:"render",value:function(){return i.a.createElement("div",{className:"animated fadeIn"},i.a.createElement(g.a,null,i.a.createElement(E.a,null,i.a.createElement(P.a,null,i.a.createElement(N.a,null,"Purchase Order",i.a.createElement(o.Link,{to:"/purchaseOrder/purchaseOrder",className:"float-right mb-0"},i.a.createElement(k.a,{color:"secondary"},"Kembali"))),i.a.createElement(b.a,null,this.displayPurchaseOrderDetail())))))}}]),t}(c.Component);a.default=d(Object(u.a)(h.F,{options:function(e){return{variables:{id:e.match.params.id}}}}),Object(u.a)(h.G,{name:"getPurchaseOrdersQuery"}),Object(u.a)(h.R,{name:"hapusPurchaseOrderMutation"}),Object(u.a)(h.L,{name:"hapusManyListItemPurchaseOrder"}),Object(u.a)(h.fb,{name:"updateStatusPurchaseOrder"}),Object(u.a)(h.bb,{name:"updateStatusListItemPurchaseOrder"}),Object(u.a)(h.db,{name:"updateStatusListRequestOnOrder"}),Object(u.a)(h.w,{name:"getListRequestsQuery"}))(D)},64:function(e,a,t){"use strict";var r=t(4),n=t(13),s=t(2),l=t.n(s),c=t(14),i=t.n(c),o=t(59),u=t.n(o),d=t(60),m={tag:d.q,className:i.a.string,cssModule:i.a.object},p=function(e){var a=e.className,t=e.cssModule,s=e.tag,c=Object(n.a)(e,["className","cssModule","tag"]),i=Object(d.m)(u()(a,"card-header"),t);return l.a.createElement(s,Object(r.a)({},c,{className:i}))};p.propTypes=m,p.defaultProps={tag:"div"},a.a=p},67:function(e,a,t){"use strict";var r=t(4),n=t(13),s=t(2),l=t.n(s),c=t(14),i=t.n(c),o=t(59),u=t.n(o),d=t(60),m={tag:d.q,inverse:i.a.bool,color:i.a.string,body:i.a.bool,outline:i.a.bool,className:i.a.string,cssModule:i.a.object,innerRef:i.a.oneOfType([i.a.object,i.a.string,i.a.func])},p=function(e){var a=e.className,t=e.cssModule,s=e.color,c=e.body,i=e.inverse,o=e.outline,m=e.tag,p=e.innerRef,h=Object(n.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),b=Object(d.m)(u()(a,"card",!!i&&"text-white",!!c&&"card-body",!!s&&(o?"border":"bg")+"-"+s),t);return l.a.createElement(m,Object(r.a)({},h,{className:b,ref:p}))};p.propTypes=m,p.defaultProps={tag:"div"},a.a=p},68:function(e,a,t){"use strict";var r=t(4),n=t(13),s=t(2),l=t.n(s),c=t(14),i=t.n(c),o=t(59),u=t.n(o),d=t(60),m={tag:d.q,className:i.a.string,cssModule:i.a.object,innerRef:i.a.oneOfType([i.a.object,i.a.string,i.a.func])},p=function(e){var a=e.className,t=e.cssModule,s=e.innerRef,c=e.tag,i=Object(n.a)(e,["className","cssModule","innerRef","tag"]),o=Object(d.m)(u()(a,"card-body"),t);return l.a.createElement(c,Object(r.a)({},i,{className:o,ref:s}))};p.propTypes=m,p.defaultProps={tag:"div"},a.a=p},74:function(e,a,t){"use strict";var r=t(4),n=t(13),s=t(2),l=t.n(s),c=t(14),i=t.n(c),o=t(59),u=t.n(o),d=t(60),m={className:i.a.string,cssModule:i.a.object,size:i.a.string,bordered:i.a.bool,borderless:i.a.bool,striped:i.a.bool,dark:i.a.bool,hover:i.a.bool,responsive:i.a.oneOfType([i.a.bool,i.a.string]),tag:d.q,responsiveTag:d.q,innerRef:i.a.oneOfType([i.a.func,i.a.string,i.a.object])},p=function(e){var a=e.className,t=e.cssModule,s=e.size,c=e.bordered,i=e.borderless,o=e.striped,m=e.dark,p=e.hover,h=e.responsive,b=e.tag,f=e.responsiveTag,g=e.innerRef,E=Object(n.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),v=Object(d.m)(u()(a,"table",!!s&&"table-"+s,!!c&&"table-bordered",!!i&&"table-borderless",!!o&&"table-striped",!!m&&"table-dark",!!p&&"table-hover"),t),O=l.a.createElement(b,Object(r.a)({},E,{ref:g,className:v}));if(h){var y=Object(d.m)(!0===h?"table-responsive":"table-responsive-"+h,t);return l.a.createElement(f,{className:y},O)}return O};p.propTypes=m,p.defaultProps={tag:"table",responsiveTag:"div"},a.a=p}}]);
//# sourceMappingURL=71.2e31dde3.chunk.js.map