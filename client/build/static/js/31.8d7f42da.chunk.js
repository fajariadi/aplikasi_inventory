(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[31],{311:function(e,a,r){"use strict";r.r(a);var t=r(22),n=r(23),s=r(25),l=r(24),i=r(2),m=r.n(i),c=r(320),d=r(26),u=r(64),o=r(67),p=r.n(o),b=r(62),g=r(75),h=r(119),v=r(69),E=r(70),f=r(292),O=r(293),y=r(91),j=r(66),k=r(71),P=r(74),B=r(65),_=function(e){Object(s.a)(r,e);var a=Object(l.a)(r);function r(e){var n;return Object(t.a)(this,r),(n=a.call(this,e)).state={nama:"",purchase_id:"",jumlah:0,modalIsOpen:!1,harga:0,sewa:0},n}return Object(n.a)(r,[{key:"toggleModal",value:function(){this.setState({modalIsOpen:!this.state.modalIsOpen})}},{key:"displayPurchaseOrder",value:function(){var e=this.props.getPurchaseOrdersQuery;return e.loading?m.a.createElement("div",null,"Loading order..."):e.purchaseOrders.map((function(e){return m.a.createElement("option",{key:e.id,value:e.id},e.kode)}))}},{key:"displayNewPenerimaanbarang",value:function(){var e=this.props.getPenerimaanBarangsQuery,a="",r="",t="";return e.penerimaanBarangs.map((function(e){return a=e.tanggal,r=e.kode,t=e.akun.karyawan.nama})),m.a.createElement(g.a,null,m.a.createElement(h.a,{className:"form-horizontal"},m.a.createElement(v.a,null,m.a.createElement(E.a,{md:"4"},m.a.createElement(f.a,{row:!0},m.a.createElement(E.a,{md:"6"},m.a.createElement(O.a,{htmlFor:"name"},"Kode Penerimaan Barang")),m.a.createElement(E.a,{md:"6"},m.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:r,disabled:!0})))),m.a.createElement(E.a,{md:"4"},m.a.createElement(f.a,{row:!0},m.a.createElement(E.a,{md:"3"},m.a.createElement(O.a,{htmlFor:"name"},"Tanggal")),m.a.createElement(E.a,{md:"9"},m.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:a,disabled:!0})))),m.a.createElement(E.a,{md:"4"},m.a.createElement(f.a,{row:!0},m.a.createElement(E.a,{md:"3"},m.a.createElement(O.a,{htmlFor:"name"},"Penerima")),m.a.createElement(E.a,{md:"9"},m.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:t,disabled:!0})))))))}},{key:"displayPurchaseOrderDetail",value:function(){var e=this.props.data.purchaseOrder;if(e)return m.a.createElement(g.a,null,m.a.createElement(h.a,{className:"form-horizontal"},m.a.createElement(v.a,null,m.a.createElement(E.a,{md:"4"},m.a.createElement(f.a,{row:!0},m.a.createElement(E.a,{md:"6"},m.a.createElement(O.a,{htmlFor:"name"},"Kode Purchase Order")),m.a.createElement(E.a,{md:"6"},m.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:e.kode,disabled:!0})))),m.a.createElement(E.a,{md:"4"},m.a.createElement(f.a,{row:!0},m.a.createElement(E.a,{md:"3"},m.a.createElement(O.a,{htmlFor:"name"},"Nama vendor")),m.a.createElement(E.a,{md:"9"},m.a.createElement(y.a,{type:"text",name:"kode",id:"kode",value:e.vendor.nama,disabled:!0})))))),m.a.createElement("hr",null),m.a.createElement(j.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},m.a.createElement("thead",{align:"center"},m.a.createElement("tr",null,m.a.createElement("th",null,"Nama Barang"),m.a.createElement("th",null,"Satuan"),m.a.createElement("th",null,"Jumlah"))),m.a.createElement("tbody",{align:"center"},e.listItemPurchaseOrder.map((function(e){return m.a.createElement("tr",{key:e.id},m.a.createElement("td",null,e.nama_barang),m.a.createElement("td",null,e.satuan),m.a.createElement("td",null,e.jumlah_barang))})))),m.a.createElement("div",{align:"center"},m.a.createElement(d.Link,{to:"/penerimaanBarang/penerimaanBarang"},m.a.createElement(k.a,{onClick:this.Submit.bind(this,e.vendor.jenis_usaha),color:"primary"},"Submit"))))}},{key:"Submit",value:function(e){var a=this;"Perkakas"!==e?this.props.data.purchaseOrder.listItemPurchaseOrder.map((function(e){var r="",t=0;if(a.props.getPersediaanBarangsQuery.persediaanBarangs.map((function(a){e.nama_barang===a.barang.nama_barang&&(r=a.barang.id,t=a.jumlah)})),""!==r)a.props.updateJumlahPersediaanBarang({variables:{barang_id:r,jumlah:parseInt(e.jumlah_barang)+parseInt(t)},refetchQueries:[{query:b.E}]});else{var n="";a.props.getBarangsQuery.barangs.map((function(a){e.nama_barang===a.nama_barang&&(n=a.id)})),a.props.addPersediaanBarang({variables:{barang_id:n,jumlah:parseInt(e.jumlah_barang),status:"Available"},refetchQueries:[{query:b.E}]})}})):this.props.data.purchaseOrder.listItemPurchaseOrder.map((function(e){var r=a.props.getAllInventarisQuery,t="",n=0;if(r.allInventaris.map((function(a){e.nama_barang===a.barang.nama_barang&&(t=a.barang.id,n=a.jumlah)})),""!==t)a.props.updateJumlahInventaris({variables:{barang_id:t,jumlah:parseInt(e.jumlah_barang)+parseInt(n)},refetchQueries:[{query:b.p}]});else{var s="";(r=a.props.getBarangsQuery).barangs.map((function(a){e.nama_barang===a.nama_barang&&(s=a.id)})),a.props.addInventaris({variables:{barang_id:s,jumlah:parseInt(e.jumlah_barang),status:"Available",jumlah_dipakai:0,jumlah_diperbaiki:0},refetchQueries:[{query:b.p}]})}}));this.props.updateStatusDonePurchaseOrder({variables:{id:this.props.match.params.id,status:"Done"},refetchQueries:[{query:b.G}]}),this.props.updateStatusListRequestOnOrder({variables:{order_id:this.props.match.params.id,status:"Ready"},refetchQueries:[{query:b.v}]}),p.a.fire({position:"center",icon:"success",title:"Penerimaan Barang Berhasil Disimpan",showConfirmButton:!0})}},{key:"render",value:function(){return m.a.createElement("div",{className:"animated fadeIn"},m.a.createElement(v.a,null,m.a.createElement(E.a,null,m.a.createElement(P.a,null,m.a.createElement(B.a,null,m.a.createElement("i",{className:"fa fa-align-justify"}),"Form Buat Penerimaan Barang",m.a.createElement(d.Link,{to:"/penerimaanBarang/penerimaanBarang",className:"float-right mb-0"},m.a.createElement(k.a,{color:"danger"},"Batal"))),this.displayNewPenerimaanbarang(),this.displayPurchaseOrderDetail()))))}}]),r}(i.Component);a.default=u(Object(c.a)(b.F,{options:function(e){return{variables:{id:e.match.params.id}}}}),Object(c.a)(b.z,{name:"getPenerimaanBarangsQuery"}),Object(c.a)(b.G,{name:"getPurchaseOrdersQuery"}),Object(c.a)(b.E,{name:"getPersediaanBarangsQuery"}),Object(c.a)(b.v,{name:"getListRequestsQuery"}),Object(c.a)(b.r,{name:"getBarangsQuery"}),Object(c.a)(b.p,{name:"getAllInventarisQuery"}),Object(c.a)(b.i,{name:"addPersediaanBarang"}),Object(c.a)(b.X,{name:"updateJumlahPersediaanBarang"}),Object(c.a)(b.W,{name:"updateJumlahInventaris"}),Object(c.a)(b.db,{name:"updateStatusListRequestOnOrder"}),Object(c.a)(b.ab,{name:"updateStatusDonePurchaseOrder"}))(_)},65:function(e,a,r){"use strict";var t=r(4),n=r(13),s=r(2),l=r.n(s),i=r(14),m=r.n(i),c=r(59),d=r.n(c),u=r(60),o={tag:u.m,className:m.a.string,cssModule:m.a.object},p=function(e){var a=e.className,r=e.cssModule,s=e.tag,i=Object(n.a)(e,["className","cssModule","tag"]),m=Object(u.i)(d()(a,"card-header"),r);return l.a.createElement(s,Object(t.a)({},i,{className:m}))};p.propTypes=o,p.defaultProps={tag:"div"},a.a=p},66:function(e,a,r){"use strict";var t=r(4),n=r(13),s=r(2),l=r.n(s),i=r(14),m=r.n(i),c=r(59),d=r.n(c),u=r(60),o={className:m.a.string,cssModule:m.a.object,size:m.a.string,bordered:m.a.bool,borderless:m.a.bool,striped:m.a.bool,dark:m.a.bool,hover:m.a.bool,responsive:m.a.oneOfType([m.a.bool,m.a.string]),tag:u.m,responsiveTag:u.m,innerRef:m.a.oneOfType([m.a.func,m.a.string,m.a.object])},p=function(e){var a=e.className,r=e.cssModule,s=e.size,i=e.bordered,m=e.borderless,c=e.striped,o=e.dark,p=e.hover,b=e.responsive,g=e.tag,h=e.responsiveTag,v=e.innerRef,E=Object(n.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),f=Object(u.i)(d()(a,"table",!!s&&"table-"+s,!!i&&"table-bordered",!!m&&"table-borderless",!!c&&"table-striped",!!o&&"table-dark",!!p&&"table-hover"),r),O=l.a.createElement(g,Object(t.a)({},E,{ref:v,className:f}));if(b){var y=Object(u.i)(!0===b?"table-responsive":"table-responsive-"+b,r);return l.a.createElement(h,{className:y},O)}return O};p.propTypes=o,p.defaultProps={tag:"table",responsiveTag:"div"},a.a=p}}]);
//# sourceMappingURL=31.8d7f42da.chunk.js.map