(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[34],{110:function(e,a,t){"use strict";var n=t(4),r=t(13),s=t(2),i=t.n(s),l=t(14),c=t.n(l),m=t(59),u=t.n(m),o=t(61),d={className:c.a.string,cssModule:c.a.object,size:c.a.string,bordered:c.a.bool,borderless:c.a.bool,striped:c.a.bool,dark:c.a.bool,hover:c.a.bool,responsive:c.a.oneOfType([c.a.bool,c.a.string]),tag:o.m,responsiveTag:o.m,innerRef:c.a.oneOfType([c.a.func,c.a.string,c.a.object])},p=function(e){var a=e.className,t=e.cssModule,s=e.size,l=e.bordered,c=e.borderless,m=e.striped,d=e.dark,p=e.hover,g=e.responsive,b=e.tag,h=e.responsiveTag,E=e.innerRef,f=Object(r.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),v=Object(o.i)(u()(a,"table",!!s&&"table-"+s,!!l&&"table-bordered",!!c&&"table-borderless",!!m&&"table-striped",!!d&&"table-dark",!!p&&"table-hover"),t),j=i.a.createElement(b,Object(n.a)({},f,{ref:E,className:v}));if(g){var y=Object(o.i)(!0===g?"table-responsive":"table-responsive-"+g,t);return i.a.createElement(h,{className:y},j)}return j};p.propTypes=d,p.defaultProps={tag:"table",responsiveTag:"div"},a.a=p},398:function(e,a,t){"use strict";t.r(a);var n=t(23),r=t(24),s=t(26),i=t(25),l=t(2),c=t.n(l),m=t(27),u=t(12),o=t(421),d=t(72),p=t(92),g=t.n(p),b=t(69),h=t(77),E=t(207),f=t(111),v=t(112),j=t(394),y=t(395),k=t(172),B=t(110),O=t(115),D=t(80),P=t(91),q=function(e){Object(s.a)(t,e);var a=Object(i.a)(t);function t(e){var r;Object(n.a)(this,t),r=a.call(this,e);var s=!0;return null==localStorage.getItem("username")&&(s=!1),r.state={loggedIn:s,akun_id:localStorage.getItem("user_id"),divisi:localStorage.getItem("divisi"),jabatan:localStorage.getItem("jabatan")},r}return Object(r.a)(t,[{key:"onDelete",value:function(e){var a=this;g.a.fire({title:"Apakah anda Yakin?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Ya, Saya Yakin!"}).then((function(t){t.isConfirmed&&(a.props.hapusPermintaanBarangMutation({variables:{id:e},refetchQueries:[{query:b.D}]}),a.props.hapusManyListRequestMutation({variables:{id:e},refetchQueries:[{query:b.v}]}),a.props.history.push("/permintaanBarang/permintaanBarang"),g.a.fire("Dihapus!","Permintaan Barang Telah Dihapus","success"))}))}},{key:"displayRequestDetail",value:function(){var e=this.props.data.permintaanBarang;if(e)return c.a.createElement(h.a,null,c.a.createElement(E.a,{className:"form-horizontal"},c.a.createElement(f.a,null,c.a.createElement(v.a,{md:"4"},c.a.createElement(j.a,{row:!0},c.a.createElement(v.a,{md:"6"},c.a.createElement(y.a,{htmlFor:"name"},"Kode Permintaan")),c.a.createElement(v.a,{md:"6"},c.a.createElement(k.a,{type:"text",name:"kode",id:"kode",value:e.kode,disabled:!0})))),c.a.createElement(v.a,{md:"4"},c.a.createElement(j.a,{row:!0},c.a.createElement(v.a,{md:"3"},c.a.createElement(y.a,{htmlFor:"name"},"Status")),c.a.createElement(v.a,{md:"9"},c.a.createElement(k.a,{type:"text",name:"kode",id:"kode",value:e.status,disabled:!0})))),this.renderElement3(e.status,e.tanggal_setuju)),c.a.createElement(f.a,null,c.a.createElement(v.a,{md:"4"},c.a.createElement(j.a,{row:!0},c.a.createElement(v.a,{md:"6"},c.a.createElement(y.a,{htmlFor:"name"},"Dibuat Oleh")),c.a.createElement(v.a,{md:"6"},c.a.createElement(k.a,{type:"text",name:"kode",id:"kode",value:e.akun.karyawan.nama,disabled:!0})))),c.a.createElement(v.a,{md:"4"},c.a.createElement(j.a,{row:!0},c.a.createElement(v.a,{md:"3"},c.a.createElement(y.a,{htmlFor:"name"},"Divisi")),c.a.createElement(v.a,{md:"9"},c.a.createElement(k.a,{type:"text",name:"kode",id:"kode",value:e.divisi.nama,disabled:!0})))),c.a.createElement(v.a,{md:"4"},c.a.createElement(j.a,{row:!0},c.a.createElement(v.a,{md:"3"},c.a.createElement(y.a,{htmlFor:"name"},"Tanggal")),c.a.createElement(v.a,{md:"9"},c.a.createElement(k.a,{type:"text",name:"kode",id:"kode",value:e.tanggal,disabled:!0})))))),c.a.createElement("hr",null),c.a.createElement(B.a,{hover:!0,bordered:!0,striped:!0,responsive:!0,size:"sm"},c.a.createElement("thead",{align:"center"},c.a.createElement("tr",null,c.a.createElement("th",null,"Nama Barang"),c.a.createElement("th",null,"Jumlah"),c.a.createElement("th",null,"Satuan"),c.a.createElement("th",null,"Jenis"),c.a.createElement("th",null,"Status"))),c.a.createElement("tbody",{align:"center"},e.listRequest.map((function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,e.nama_barang),c.a.createElement("td",null,e.jumlah_barang),c.a.createElement("td",null,e.satuan),c.a.createElement("td",null,e.jenis),c.a.createElement("td",null,e.status))})))),c.a.createElement("hr",null),c.a.createElement(f.a,null,c.a.createElement(v.a,null,this.renderElement(e.akun.id,e.status)),c.a.createElement(v.a,null,this.renderElement2(e.status))))}},{key:"renderElement",value:function(e,a){if(this.state.akun_id===e&&"Belum Disetujui"===a)return c.a.createElement("div",{align:"center"},c.a.createElement(m.Link,{to:"/permintaanBarang/editPermintaanBarang/".concat(this.props.match.params.id)},c.a.createElement(O.a,{color:"warning"},c.a.createElement("i",{className:"fa fa-pencil"},"Edit Permintaan Barang"))),c.a.createElement(O.a,{onClick:this.onDelete.bind(this,this.props.match.params.id),color:"danger"},c.a.createElement("i",{className:"fa fa-trash"},"Hapus Permintaan Barang")));var t=this.props.data.permintaanBarang,n=!0;return t&&t.listRequest.map((function(e){"Proses"!==e.status&&"Delivery"!==e.status&&"Ready"!==e.status||(n=!1)})),!0===n?c.a.createElement("div",{align:"center"},c.a.createElement(O.a,{onClick:this.onDelete.bind(this,this.props.match.params.id),color:"danger"},c.a.createElement("i",{className:"fa fa-trash"},"Hapus Permintaan Barang"))):void 0}},{key:"renderElement2",value:function(e){if("Manajer"===this.state.jabatan&&"Logistic"===this.state.divisi&&"Belum Disetujui"===e)return c.a.createElement("div",{align:"center"},c.a.createElement(O.a,{onClick:this.onSetujuiPermintaan.bind(this,this.props.match.params.id),color:"success"},c.a.createElement("i",{className:"fa fa-check"},"Setujui Permintaan Barang")),c.a.createElement(O.a,{onClick:this.onTolakPermintaan.bind(this,this.props.match.params.id),color:"danger"},c.a.createElement("i",{className:"fa fa-times"},"Tolak Permintaan Barang")))}},{key:"renderElement3",value:function(e,a){if("Disetujui"===e||"Ditolak"===e)return c.a.createElement(v.a,{md:"4"},c.a.createElement(j.a,{row:!0},c.a.createElement(v.a,{md:"3"},c.a.createElement(y.a,{htmlFor:"name"},"Tanggal Diproses")),c.a.createElement(v.a,{md:"9"},c.a.createElement(k.a,{type:"text",name:"kode",id:"kode",value:a,disabled:!0}))))}},{key:"onSetujuiPermintaan",value:function(e){var a=this,t=this.props.getListRequestsQuery,n=this.props.getPersediaanBarangsQuery,r=0;n.persediaanBarangs.map((function(e){r=e.jumlah,t.listrequests.map((function(t){"Waiting"!==t.status&&"Ready"!==t.status||e.barang.nama_barang===t.nama_barang&&(r>=t.jumlah_barang?(r-=t.jumlah_barang,"Waiting"===t.status&&a.props.updateStatusListRequestOnSetujui({variables:{id:t.id,status:"Ready"},refetchQueries:[{query:b.v}]})):a.props.updateStatusListRequestOnSetujui({variables:{id:t.id,status:"Active"},refetchQueries:[{query:b.v}]}))}))}));var s=[];t.listrequests.map((function(a){if(a.permintaanBarang.id===e)if(0===s.length){var t={nama:a.nama_barang,list_id:a.id,request_id:a.permintaanBarang.id};s.push(t)}else{var n=!1;if(s.map((function(e){e.nama===a.nama_barang&&(n=!0)})),!1===n){var r={nama:a.nama_barang,list_id:a.id,request_id:a.permintaanBarang.id};s.push(r)}}})),n.persediaanBarangs.map((function(e){var a=0;s.map((function(t){e.barang.nama_barang!==t.nama?a++:s.splice(a,1)}))})),s.map((function(e){a.props.updateOneStatusListRequest({variables:{id:e.list_id,status:"Active"},refetchQueries:[{query:b.v}]})})),this.props.updateStatusPermintaanBarang({variables:{id:e,status:"Disetujui",tanggal_setuju:(new Date).toLocaleDateString()},refetchQueries:[{query:b.D}]}),this.props.history.push("/permintaanBarang/permintaanBarang"),g.a.fire({position:"center",icon:"success",title:"Permintaan Barang Disetujui",showConfirmButton:!0})}},{key:"onTolakPermintaan",value:function(e){this.props.updateStatusPermintaanBarang({variables:{id:e,status:"Ditolak",tanggal_setuju:(new Date).toLocaleDateString()},refetchQueries:[{query:b.D}]}),this.props.updateStatusListRequest({variables:{id:e,status:"Ditolak"},refetchQueries:[{query:b.v}]}),this.props.history.push("/permintaanBarang/permintaanBarang"),g.a.fire({position:"center",icon:"error",title:"Permintaan Barang Ditolak",showConfirmButton:!0})}},{key:"render",value:function(){return!1===this.state.loggedIn?c.a.createElement(u.c,{to:"/login"}):c.a.createElement("div",{className:"animated fadeIn"},c.a.createElement(f.a,null,c.a.createElement(v.a,null,c.a.createElement(D.a,null,c.a.createElement(P.a,null,c.a.createElement(f.a,null,c.a.createElement(v.a,null,"Detail Permintaan Barang"),c.a.createElement(v.a,null,c.a.createElement(m.Link,{to:"/permintaanBarang/permintaanBarang",className:"float-right mb-0"},c.a.createElement(O.a,{color:"primary",size:"sm"},"Kembali"))))),this.displayRequestDetail()))))}}]),t}(l.Component);a.default=d(Object(o.a)(b.C,{options:function(e){return{variables:{id:e.match.params.id}}}}),Object(o.a)(b.gb,{name:"updateStatusListRequest"}),Object(o.a)(b.kb,{name:"updateStatusPermintaanBarang"}),Object(o.a)(b.D,{name:"getPermintaanBarangsQuery"}),Object(o.a)(b.v,{name:"getListRequestsQuery"}),Object(o.a)(b.P,{name:"hapusPermintaanBarangMutation"}),Object(o.a)(b.L,{name:"hapusManyListRequestMutation"}),Object(o.a)(b.E,{name:"getPersediaanBarangsQuery"}),Object(o.a)(b.ib,{name:"updateStatusListRequestOnSetujui"}),Object(o.a)(b.ab,{name:"updateOneStatusListRequest"}))(q)},77:function(e,a,t){"use strict";var n=t(4),r=t(13),s=t(2),i=t.n(s),l=t(14),c=t.n(l),m=t(59),u=t.n(m),o=t(61),d={tag:o.m,className:c.a.string,cssModule:c.a.object,innerRef:c.a.oneOfType([c.a.object,c.a.string,c.a.func])},p=function(e){var a=e.className,t=e.cssModule,s=e.innerRef,l=e.tag,c=Object(r.a)(e,["className","cssModule","innerRef","tag"]),m=Object(o.i)(u()(a,"card-body"),t);return i.a.createElement(l,Object(n.a)({},c,{className:m,ref:s}))};p.propTypes=d,p.defaultProps={tag:"div"},a.a=p},80:function(e,a,t){"use strict";var n=t(4),r=t(13),s=t(2),i=t.n(s),l=t(14),c=t.n(l),m=t(59),u=t.n(m),o=t(61),d={tag:o.m,inverse:c.a.bool,color:c.a.string,body:c.a.bool,outline:c.a.bool,className:c.a.string,cssModule:c.a.object,innerRef:c.a.oneOfType([c.a.object,c.a.string,c.a.func])},p=function(e){var a=e.className,t=e.cssModule,s=e.color,l=e.body,c=e.inverse,m=e.outline,d=e.tag,p=e.innerRef,g=Object(r.a)(e,["className","cssModule","color","body","inverse","outline","tag","innerRef"]),b=Object(o.i)(u()(a,"card",!!c&&"text-white",!!l&&"card-body",!!s&&(m?"border":"bg")+"-"+s),t);return i.a.createElement(d,Object(n.a)({},g,{className:b,ref:p}))};p.propTypes=d,p.defaultProps={tag:"div"},a.a=p},91:function(e,a,t){"use strict";var n=t(4),r=t(13),s=t(2),i=t.n(s),l=t(14),c=t.n(l),m=t(59),u=t.n(m),o=t(61),d={tag:o.m,className:c.a.string,cssModule:c.a.object},p=function(e){var a=e.className,t=e.cssModule,s=e.tag,l=Object(r.a)(e,["className","cssModule","tag"]),c=Object(o.i)(u()(a,"card-header"),t);return i.a.createElement(s,Object(n.a)({},l,{className:c}))};p.propTypes=d,p.defaultProps={tag:"div"},a.a=p}}]);
//# sourceMappingURL=34.b0e2355f.chunk.js.map